<?xml version='1.0'?>
<sdf version='1.4'>
  <model name="ITU_AGV_2">
  <static>false</static>
   
   <link name="base_link_2">
   <pose>0 0 0.12 0 0 0</pose>
   <mass>5</mass>
   
   <inertial>
        <mass>5.67</mass>
        <inertia>
          <ixx>0.07</ixx>
          <iyy>0.08</iyy>
          <izz>0.10</izz>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyz>0</iyz>
        </inertia>
      </inertial>

   <collision name='collision'>
      <pose>0 0 -0.11 0 0 -1.571</pose>	
      <geometry>
         <mesh><uri>model://itu_agv_2/meshes/agv.stl</uri></mesh>  
      </geometry>
   </collision>
   
      <visual name="visual">
      <pose>0 0 -0.11 0 0 -1.571</pose>
      <geometry>
         <mesh><uri>model://itu_agv_2/meshes/agv.stl</uri></mesh>  
      </geometry>
   	<material>
	 <ambient>0.5 0.5 0.5 1</ambient>
	 <diffuse>0.5 0.5 0.5 1</diffuse>
	 <specular>0.1 0.1 0.1 1</specular>
	 <emissive>0 0 0 0</emissive>    
        </material>  
   </visual> 
    
   <collision name='front_caster_collision'>
	<pose>0.25 0 -0.07 0 0 0</pose>
            <geometry>
                <sphere>
                <radius>.05</radius>
              </sphere>
            </geometry>
	
	 <surface>
              <friction>
                <ode>
                  <mu>0</mu>
                  <mu2>0</mu2>
                  <slip1>1.0</slip1>
                  <slip2>1.0</slip2>
                </ode>
              </friction>
            </surface>
          </collision>
	 
	 <visual name='front_caster_visual'>
            <pose>0.25 0 -0.07 0 0 0</pose>
            <geometry>
              <sphere>
                <radius>.05</radius>
              </sphere>
            </geometry>
          </visual>

        <collision name='back_caster_collision'>
	<pose>-0.25 0 -0.07 0 0 0</pose>
            <geometry>
                <sphere>
                <radius>.05</radius>
              </sphere>
            </geometry>
	
	 <surface>
              <friction>
                <ode>
                  <mu>0</mu>
                  <mu2>0</mu2>
                  <slip1>1.0</slip1>
                  <slip2>1.0</slip2>
                </ode>
              </friction>
            </surface>
          </collision>
	 
	 <visual name='back_caster_visual'>
            <pose>-0.25 0 -0.07 0 0 0</pose>
            <geometry>
              <sphere>
                <radius>.05</radius>
              </sphere>
            </geometry>
          </visual>	

  </link> 
  
  <link name="base_footprint_2">
   <pose>0 0 0 0 0 0 </pose>
    </link>
    <joint name="base_joint" type="fixed">
      <pose>0 0 0 0 0 0 </pose>
      <parent link="base_footprint_2"/>
      <child link="base_link_2"/>
    </joint>
  
  <link name="wheel_left">
    <pose>0 0.22 0.1 1.571 0 0 </pose>
    <collision name="collision">
      <geometry>
         <cylinder>         
             <radius>.1</radius>
	     <length>.05</length>
         </cylinder>
      </geometry>
   </collision> 
  </link>
  
  <joint type="revolute" name="base_to_wheel_left">
       <pose>0 0 0 0 0 0</pose>
        <child>wheel_left</child>
        <parent>base_link_2</parent>
        <axis>
          <xyz>0 1 0</xyz>
        </axis>
      </joint>
      
    <link name="wheel_right">
    <pose>0 -0.22 0.1 1.571 0 0 </pose>
    <collision name="collision">
      <geometry>
         <cylinder>         
             <radius>.1</radius>
	     <length>.05</length>
         </cylinder>
      </geometry>
   </collision>
     
  </link>

   <joint type="revolute" name="base_to_wheel_right">
        <pose>0 0 0 0 0 0</pose>
        <child>wheel_right</child>
        <parent>base_link_2</parent>
        <axis>
          <xyz>0 1 0</xyz>
        </axis>
      </joint>  

	<plugin name="differential_drive_controller" filename="libgazebo_ros_diff_drive.so">
 		<alwaysOn>true</alwaysOn>
 		<updateRate>20</updateRate>
 		<leftJoint>base_to_wheel_left</leftJoint>
 		<rightJoint>base_to_wheel_right</rightJoint>
 		<wheelSeparation>0.4</wheelSeparation>
 		<wheelDiameter>0.2</wheelDiameter>
 		<torque>20</torque>
 		<commandTopic>cmd_vel_2</commandTopic>
 		<odometryTopic>odom</odometryTopic>
 		<odometryFrame>odom</odometryFrame>
 		<robotBaseFrame>base_footprint_2</robotBaseFrame>
 	</plugin>
 	
  </model>	
</sdf>

